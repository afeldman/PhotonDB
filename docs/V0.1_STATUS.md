# PhotonDB v0.1 - Current Status & Next Steps

## Overview

**PhotonDB** is a modern Rust reimplementation of RethinkDB, modernizing the database for vectors, time-series, and AI/ML workloads while maintaining RethinkDB's elegant query philosophy.

**Current Phase:** v0.1-alpha (Q4 2025)  
**Target Release:** v1.0 (Q2 2026)

---

## v0.1 Current Status

### âœ… Completed Features

**Core Engine:**

- Rust web server (Axum 0.7)
- Custom slab + B-Tree storage engine
- HTTP/REST API (7 core endpoints)
- Database hierarchy (Databases â†’ Tables â†’ Documents)
- WAL (Write-Ahead Log) and crash recovery
- Pluggable storage backends

**Query System:**

- ReQL-style AST (Abstract Syntax Tree)
- Query compiler (JSON â†’ AST)
- Basic query executor
- JSON wire protocol (RethinkDB-compatible)

**Infrastructure:**

- WebSocket support for changefeeds
- Prometheus metrics (`/_metrics`)
- Health endpoints (`/health`, `/health/live`, `/health/ready`)
- Admin dashboard (`/admin`)
- CLI with clap
- Kubernetes manifests & Helm charts

**Security:**

- OAuth2/JWT-ready design
- Honeytrap threat detection integration
- Middleware & auth hooks

### ğŸš§ In Progress

- Query executor edge cases
- Error handling polish
- Documentation completeness
- Integration test coverage

### âŒ Not Yet Implemented (Planned for Future Phases)

- âŒ GraphQL API (planned v0.5)
- âŒ Vector search indexing (planned v0.6)
- âŒ Time-series features (planned v0.7)
- âŒ Advanced ReQL operations (joins, subqueries)
- âŒ Python bindings (planned v0.6)
- âŒ RBAC (Role-Based Access Control) (planned v0.8)

---

## Development Quick Start

### Immediate Setup

```bash
# Clone and build
git clone https://github.com/afeldman/PhotonDB.git
cd PhotonDB
cargo build --release

# Run development server
./target/release/photondb serve --dev-mode

# Server accessible at:
# - HTTP API: http://127.0.0.1:8080
# - Admin UI: http://127.0.0.1:8080/_admin
# - Metrics: http://127.0.0.1:8080/_metrics
```

### Verify Installation

```bash
# Test database operations
photondb db list
photondb db create test_app
photondb table create --db test_app users
photondb table list --db test_app
```

### Run Tests

```bash
# All tests
cargo test

# Specific test
cargo test storage::

# With logging
RUST_LOG=debug cargo test -- --nocapture
```

---

## Directory Structure

```
src/
â”œâ”€â”€ bin/photondb.rs          # CLI entry point
â”œâ”€â”€ server/                  # HTTP server
â”‚   â”œâ”€â”€ handlers.rs          # REST endpoints
â”‚   â”œâ”€â”€ middleware.rs        # Request middleware
â”‚   â”œâ”€â”€ routes.rs            # Route definitions
â”‚   â”œâ”€â”€ security.rs          # Auth & security
â”‚   â””â”€â”€ websocket.rs         # WebSocket support
â”œâ”€â”€ reql/                    # Query language
â”‚   â”œâ”€â”€ ast.rs               # Query AST
â”‚   â”œâ”€â”€ datum.rs             # Data types
â”‚   â”œâ”€â”€ compiler.rs          # Parser/compiler
â”‚   â””â”€â”€ terms.rs             # Operations
â”œâ”€â”€ query/                   # Query execution
â”‚   â”œâ”€â”€ compiler.rs          # Compile to executable
â”‚   â””â”€â”€ executor.rs          # Execute queries
â”œâ”€â”€ storage/                 # Persistence
â”‚   â”œâ”€â”€ engine.rs            # Storage trait
â”‚   â”œâ”€â”€ database.rs          # DB hierarchy
â”‚   â”œâ”€â”€ btree_storage.rs     # B-Tree backend
â”‚   â””â”€â”€ slab/                # Slab allocator
â”œâ”€â”€ network/                 # Networking
â”‚   â”œâ”€â”€ server.rs            # TCP server
â”‚   â”œâ”€â”€ quic.rs              # QUIC server
â”‚   â”œâ”€â”€ protocol.rs          # Wire protocol
â”‚   â””â”€â”€ auth.rs              # Authentication
â”œâ”€â”€ cluster/                 # Clustering
â”‚   â”œâ”€â”€ discovery.rs         # Node discovery
â”‚   â”œâ”€â”€ health.rs            # Health checks
â”‚   â”œâ”€â”€ metrics.rs           # Monitoring
â”‚   â””â”€â”€ k8s.rs               # Kubernetes
â””â”€â”€ plugin/                  # Plugin system
    â”œâ”€â”€ loader.rs
    â”œâ”€â”€ registry.rs
    â””â”€â”€ traits.rs

docs/
â”œâ”€â”€ DEVELOPMENT_SETUP.md     # Development guide
â”œâ”€â”€ DEVELOPMENT_ROADMAP.md   # Release phases
â”œâ”€â”€ GRAPHQL_STRATEGY.md      # GraphQL plan
â”œâ”€â”€ architecture/            # Architecture docs
â””â”€â”€ api/                     # API reference

tests/
â”œâ”€â”€ integration_network.rs   # Network tests
â”œâ”€â”€ query_execution_test.rs  # Query tests
â””â”€â”€ k8s_scaling_test.rs      # K8s tests
```

---

## Key Entry Points for Developers

### For Query Work

- Start at: `src/reql/compiler.rs`
- Then: `src/query/executor.rs`
- Test: `tests/query_execution_test.rs`

### For Storage Work

- Start at: `src/storage/engine.rs`
- Then: `src/storage/btree_storage.rs` or `src/storage/slab/`
- Test: `src/storage/slab/production_tests.rs`

### For Server/API Work

- Start at: `src/server/handlers.rs`
- Then: `src/server/routes.rs`
- Test: `tests/integration_network.rs`

### For Clustering Work

- Start at: `src/cluster/discovery.rs`
- Then: `src/cluster/health.rs`
- Deploy: `helm/rethinkdb/` â†’ should be `helm/photondb/`

---

## v0.1 Completion Checklist

- [x] Core storage engine
- [x] HTTP server
- [x] Basic query execution
- [x] REST API (7 endpoints)
- [x] WebSocket support
- [x] Prometheus metrics
- [x] Kubernetes manifests
- [ ] Complete test coverage (in progress)
- [ ] Query executor edge cases (in progress)
- [ ] Error handling polish (in progress)
- [ ] Full documentation (in progress)

---

## Phase 2 (v0.2) Preview - Q1 2026

**Focus:** Storage optimization & indexing

**Goals:**

- Index support (B-Tree indices on tables)
- Transaction support (ACID compliance)
- Query optimization
- Performance improvements (5-10x over v0.1)

**Key Files to Watch:**

- `src/storage/btree_storage.rs` - Will get indexing
- `src/query/compiler.rs` - Will add optimization
- `src/storage/database.rs` - Transaction support

---

## Common Development Tasks

### Add a New Query Operation

1. Add term to `src/reql/terms.rs`
2. Add handler in `src/query/executor.rs`
3. Add test in `tests/query_execution_test.rs`
4. Update docs in `docs/api/reql.md`

### Add a Storage Backend

1. Implement `StorageEngine` trait in `src/storage/engine.rs`
2. Add configuration in `src/storage/mod.rs`
3. Add tests
4. Document usage

### Add HTTP Endpoint

1. Add route in `src/server/routes.rs`
2. Add handler in `src/server/handlers.rs`
3. Add test in `tests/integration_network.rs`
4. Update API docs

---

## Performance Targets

### v0.1 (Current)

- Query latency: <10ms (p99)
- Throughput: >100 ops/sec
- Memory: <200MB baseline

### v0.2 (Next)

- Query latency: <1ms (p99) - 10x improvement
- Throughput: >1000 ops/sec - 10x improvement
- Memory: <100MB baseline - 50% reduction

### v1.0 (Production)

- Query latency: <100Âµs (p99)
- Throughput: 1M+ ops/sec
- Memory: <100MB + query cache

---

## Environment Variables

### Development

```bash
DEV_MODE=true                   # Disable security
RUST_LOG=debug                  # Debug logging
PHOTONDB_CLUSTER_ENABLED=false  # Single node
```

### Production-like

```bash
DEV_MODE=false                  # Enable security
RUST_LOG=info                   # Info logging
PHOTONDB_CLUSTER_ENABLED=true   # Multi-node
PHOTONDB_NODE_ID=node1          # Node identifier
```

---

## Getting Help

### Documentation

- Development guide: `docs/DEVELOPMENT_SETUP.md`
- Architecture: `docs/architecture/README.md`
- API reference: `docs/api/http.md`
- Roadmap: `docs/DEVELOPMENT_ROADMAP.md`

### Resources

- RethinkDB API: https://rethinkdb.com/api/
- Rust Book: https://doc.rust-lang.org/book/
- Tokio Docs: https://tokio.rs/
- Axum: https://docs.rs/axum/

### Community

- GitHub Issues: Report bugs & request features
- GitHub Discussions: Ask questions & share ideas
- Pull Requests: Contribute code

---

## Next Action Items

**For Developers Joining v0.1:**

1. Read `docs/DEVELOPMENT_SETUP.md`
2. Build and run locally
3. Run test suite
4. Pick an issue or task from roadmap
5. Follow contributing guidelines

**For v0.2 Planning:**

1. Performance profiling
2. Indexing design
3. Transaction semantics
4. Query optimizer design

---

## Timeline

| Phase | Version   | Timeline   | Status               |
| ----- | --------- | ---------- | -------------------- |
| 1     | v0.1      | Q4 2025    | ğŸš§ In Progress       |
| 2     | v0.2      | Q1 2026    | ğŸ“‹ Planning          |
| 3     | v0.3      | Q2 2026    | ğŸ“‹ Planning          |
| 4     | v0.4      | Q2-Q3 2026 | ğŸ“‹ Planning          |
| 5     | v0.5      | Q3 2026    | ğŸ“‹ Planning          |
| 6+    | v0.6-v0.9 | Q3-Q1 2026 | ğŸ“‹ Planning          |
| 10    | v1.0      | Q2 2026    | ğŸ“‹ Production Target |

---

**Last Updated:** December 12, 2025  
**Status:** Ready for development  
**Questions?** Check GitHub discussions or open an issue.

**Let's build PhotonDB! ğŸš€**
